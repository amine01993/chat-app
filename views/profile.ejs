<% layout('layout') -%>

<% block('title', 'Profile') %>

<% stylesheet('css/profile.css') %>
<% stylesheet('croppr/croppr.css') %>

<% script('js/profile.js') %>

<% block('scriptsLib', '<script src="croppr/croppr.js"></script>') %>

<div class="container">
    <div class="card-panel profile-container">
        <div class="row">
            <div class="col s12">
                <% if(user.profilePicture != null && user.profilePicture != '') { %>
                    <img src="img/<%= user.profilePicture %>" alt="Profile Image" class="circle responsive-img profile-img">
                <% } else { %>
                    <img src="default-img/<%= user.sex == 'female' ? 'default-female.png' : 'default.png' %>" alt="Profile Image" class="circle responsive-img profile-img">
                <% } %>
                <input type="file" id="input-profile-img" accept="image/*">
            </div>
        </div>

        <div class="row">
            <div class="col s10">
                <div class="row info-name">
                    <div class="col s12">
                        <p class="info-name-text center">
                            <%= user.firstName + ' ' + user.lastName %>
                        </p>
                    </div>
                </div>
                <div class="row input-name hide">
                    <div class="input-field col s6">
                        <input id="input-first-name" type="text" class="validate" value="<%= user.firstName %>">
                        <label for="input-first-name">First Name</label>
                    </div>
                    <div class="input-field col s6">
                        <input id="input-last-name" type="text" class="validate" value="<%= user.lastName %>">
                        <label for="input-last-name">Last Name</label>
                    </div>
                </div>
            </div>
            <div class="col s2">
                <a id="edit-name-btn" href="javascript:;" class="btn-floating btn green">
                    <i class="material-icons">edit</i>
                </a>
                <a id="save-name-btn" href="javascript:;" class="btn-floating btn red hide">
                    <i class="material-icons">save</i>
                </a>
            </div>
        </div>
    </div>
</div>

<div id="modal-profile-img" class="modal modal-fixed-footer">
    <div class="modal-content">
        <h4>Profile Image</h4>
        <p class="raw-profile-img-container">
            <img alt="Raw Profile Image" id="raw-profile-img">
        </p>
    </div>
    <div class="modal-footer">
        <a id="profile-img-btn" href="#!" class="waves-effect waves-green btn">Submit</a>
    </div>
</div>

<canvas id="img-cropper"></canvas>
