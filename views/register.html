{% extends "layout.html" %}

{% block title %}Register{% endblock %}

{% block body %}
<style>
    .vertical-container {
        height: 100vh;
        position: relative;
    }

    .vertical-container .vertical-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translateY(-50%) translateX(-50%);
    }

    .register-page .row {
        margin-top: 0;
        margin-bottom: 0;
    }
</style>

<div class="container vertical-container register-page">
    <div class="card-panel lighten-2 vertical-content">
        <div class="row">
            <form class="col s12" method="post">

                <div class="row">
                    <div class="input-field col s12">
                        {% if errors %}
                            <input id="username" type="text" name="username"
                                value="{{ data.username }}" 
                                class="{{ 'invalid' if errors.username else '' }}">
                            <label for="username">Username</label>
                            <span class="helper-text" 
                                data-error="{{ errors.username.msg if errors.username else '' }}"></span>
                        {% else %}
                            <input id="username" type="text" class="validate" name="username">
                            <label for="username">Username</label>
                            <span class="helper-text"></span>
                        {% endif %}
                    </div>
                </div>

                <div class="row">
                    <div class="input-field col s12">
                        {% if errors %}
                            <input id="email" type="email" name="email"
                                value="{{ data.email }}" class="{{ 'invalid' if errors.email else '' }}">
                            <label for="email">Email</label>
                            <span class="helper-text"
                                data-error="{{ errors.email.msg if errors.email else '' }}"></span>
                        {% else %}
                            <input id="email" type="email" class="validate" name="email">
                            <label for="email">Email</label>
                            <span class="helper-text"></span>
                        {% endif %}
                    </div>
                </div>

                <div class="row">
                    <div class="input-field col s6">
                        {% if errors %}
                            <input id="password" type="password" name="password"
                                value="{{ data.password }}" class="{{ 'invalid' if errors.password else '' }}">
                            <label for="password">Password</label>
                            <span class="helper-text" 
                                data-error="{{ errors.password.msg if errors.password else '' }}"></span>
                        {% else %}
                            <input id="password" type="password" class="validate" name="password">
                            <label for="password">Password</label>
                            <span class="helper-text"></span>
                        {% endif %}
                    </div>
                    <div class="input-field col s6">
                        <input id="confirmPassword" type="password" class="validate" name="confirmPassword">
                        <label for="confirmPassword">Confirm Password</label>
                    </div>
                </div>

                <div class="row">
                    <div class="input-field col s6">
                        <input id="first_name" type="text" class="validate" name="firstName" 
                            value="{{ data.firstName if data else '' }}">
                        <label for="first_name">First Name</label>
                    </div>
                    <div class="input-field col s6">
                        <input id="last_name" type="text" class="validate" name="lastName" 
                            value="{{ data.lastName if data else '' }}">
                        <label for="last_name">Last Name</label>
                    </div>
                </div>

                <div class="row">
                    <div class="input-field col s12">
                        <select name="sex" id="sex">
                            <option value="" disabled {{ 'selected' if data and (data.sex == '' or not data.sex) or not data else '' }}>Choose your option</option>
                            <option value="male" {{ 'selected' if data and data.sex == 'male' else '' }}>Male</option>
                            <option value="female" {{ 'selected' if data and data.sex == 'female' else '' }}>Female</option>
                        </select>
                        <label for="sex">Sex</label>
                    </div>
                </div>

                <div class="row">
                    <div class="col s12 right-align">
                        <button class="waves-effect waves-light btn" type="submit">Create</button>
                    </div>
                </div>

            </form>
        </div>
        <div class="row">
            <div class="col s12 center-align">
                <p>Already registered? <a href="/login">Sign In</a></p>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const elems = document.querySelectorAll('select')
        const instances = M.FormSelect.init(elems, {})
        console.log(instances)
    })
</script>

{% endblock %}